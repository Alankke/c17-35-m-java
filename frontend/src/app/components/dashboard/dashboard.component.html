<img class="patrick-logo" src="assets/img/patrick-logo.png" alt="logo" routerLink="/" />
<div class="header">
    <div></div>
    <h1>Perfil <span>de Cuenta</span></h1>
    <button type="button" (click)="logOut()">Cerrar Sesi√≥n</button>
</div>
<div class="gradient-line"></div>

<div class="content">
    <div class="account-container">
        <div class="profile-container">
            <div class="user-name">{{ user.name + ' ' + user.lastName }}</div>
            <img class="profile-picture" src="assets/img/user-icon.png" alt="profile-picture" />
            <div class="user-email">{{ user.email }}</div>
        </div>

        <div class="money-container">
            <h2>Monedas adquiridas</h2>

            <div class="money">
                <div class="ars">{{ user.ars + ' ARS' }}</div>
                <div class="usd">{{ user.usd + ' USD' }}</div>
            </div>

            <button type="button" (click)="goToDeposit()">Depositar</button>
            <button type="button" (click)="goToWithdraw()">Retirar</button>
        </div>

        <div class="crypto-container">
            <table class="crypto-table">
                <thead>
                    <tr>
                        <th>Criptomoneda</th>
                        <th>Cantidad</th>
                        <th>USD</th>
                        <th>ARS</th>
                    </tr>
                </thead>
                <tbody>
                    @for (item of user.crypto; track $index) { @if (item.quantity > 0) {
                    <tr class="crypto-element">
                        <td>
                            <div class="crypto-name">
                                <img src="{{
                                        'assets/img/crypto-icons/' +
                                            item.coin.shortName.toLowerCase() +
                                            '.png'
                                    }}" />
                                <p>{{ item.coin.shortName + ' - ' + item.coin.name }}</p>
                            </div>
                        </td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ (coinList[item.coin.id - 1].usd * item.quantity).toFixed(2) }}</td>
                        <td>{{ (coinList[item.coin.id - 1].ars * item.quantity).toFixed(2) }}</td>
                    </tr>
                    } }
                </tbody>
            </table>
        </div>
    </div>

    <div class="bottom-container">
        <div class="all-crypto-container">
            <div class="all-crypto-title">
                <h2>Todas las criptomonedas</h2>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z"
                        clip-rule="evenodd" />
                </svg>
                <div>
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                        (click)="refresh()"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
                        />
                    </svg>
                </div>
            </div>

            <div class="table-container">
                <table class="all-crypto-table">
                    <thead>
                        <tr>
                            <th>Criptomoneda</th>
                            <th>USD</th>
                            <th>ARS</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (item of coinList; track $index) {
                        <tr>
                            <td>
                                <div class="crypto-name">
                                    <!-- <img src="{{
                                            'assets/img/crypto-icons/' + item.shortName.toLowerCase() + '.png'
                                        }}" />
                                    <p>{{ item.shortName + ' - ' + item.name }}</p> -->
                                </div>
                            </td>
                            <td>{{ item.usd.toFixed(2) }}</td>
                            <td>{{ item.ars }}</td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <div class="buy-sell-container bg-gradient-green">
            <div class="logo-container">
                <img src="assets/img/logo.png" alt="logo" />
            </div>

           @if (isBuy == true) {
            <div class="button-container">  
                <button class="button-buy" (click)="activeButton(true)">Comprar</button>
                <button class="inactive-sell" (click)="activeButton(false)">Vender</button>
            </div>
        }
        @if (isBuy == false){
            <div class="button-container">  
                <button class="inactive-buy" (click)="activeButton(true)">Comprar</button>
                <button class="button-sell" (click)="activeButton(false)">Vender</button>
            </div>
        }

            <label for="fiat-buy">Ingrese el total y moneda con la que desea comprar</label>
            <div class="operation-container">
                <input type="number" class="input-style w-40" />
                <select name="" id="" class="input-style w-40">

                    <option value="ETH" selected>Ethereum (ETH)</option>
                    <option value="BTC">Bitcoin (BTC)</option>
                    <option value="USDC">USDCoin (USDC)</option>
                    <option value="ADA">Cardano (ADA)</option>
                    <option value="USDT">Tether (USDT)</option>
                </select>
            </div>

            <label for="crypto-buy">Ingrese la cripto que desea</label>
            <div class="operation-container">
                <h3>Total:</h3>
                <input type="number" class="input-style w-40" />
                <select name="" id="" class="input-style w-40">

                    <option value="ARS" selected>ARS</option>
                    <option value="USD">USD</option>
                    <option value="CLP">CLP</option>
                </select>
            </div>
            <div class="centrado">
                <button type="button" class="accept-button" (click)="openDialog()">Aceptar</button>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>